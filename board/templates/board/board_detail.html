{% extends "main_template.html" %}
{% block content %}
<head>
    <style>
        .comment {
    margin: 20px 0px 20px 20px;
}

    </style>


</head>




<h2>{{boards.title}}</h2>
<body>


<p>
    {%if boards.get_previous %}
        <a href="{{boards.get_previous.get_absolute_url}}"
            title="이전 글">prev</a>
    {%endif%}

    {%if boards.get_next %}
        <a href="{{boards.get_next.get_absolute_url}}"
            title="다음 글">next</a>
    {%endif%}
</p>

<div class="text-right">
    <p>글쓴이: {{ user.first_name }} 수정일: {{boards.modify_dt | date:"Y-m-d"}} 조회수: {{boards.update_read_cnt}}</p>
</div>
<br>

<div class="test-right my-3">
    {% for file in board.files.all %}
        <a href="{% url 'board:download' file.id %}" class="ml-4">
            <i class="fas fa-download"></i>
            {{ file.filename }} ({{ file.size|filesizeformat }}) </a>
    {% endfor %}
</div>

{% if boards.owner == user %} {# 글쓴이와 로그인한 유저가 일치했을 때 #}
<div class="text-right">
    <a href="{% url 'board:update' boards.id %}" class="mr-3">
        <i class="fas fa-edit"></i>수정</a>
    <a href="{% url 'board:delete' boards.id %}" class="text-danger mr-3">
        <i class="far fa-trash"></i>삭제</a>
</div>
{% endif %}

<div>

    {{boards.content | safe }} {# HTML 태그 내용을 HTML로 처리 #}
</div>

<a href="{% url 'board:index'%}">목록으로</a>

<br>
<div>
    <b>TAGS</b> <i class="fas fa-tag"></i>
    {% load taggit_templatetags2_tags %}
    {% get_tags_for_object object as "tags" %}
    {% for tag in tags %}
    <a href="{% url 'board:tagged_object_list' tag.name %}">{{tag.name}}</a>
    {% endfor %}
    &emsp;<a href="{% url 'board:tag_cloud' %}">
    <span class="btn btn-info btn-sm">TagCloud</span> </a>
</div>

<hr>
    <a class="btn btn-info btn-sm" href="{% url 'board:add_comment_to_board'%}">Add comment</a>
    {% for comment in board.comments.all %}
    <div class="comment">
        <div class="date">{{ comment.created_dt }}</div>
        <strong>{{ comment.owner }}</strong>
        <p>{{ comment.text|linebreaks }}</p>
    </div>
    {% empty %}
    <p>No comments here yet :(</p>
    {% endfor %}



</body>
{% endblock %}